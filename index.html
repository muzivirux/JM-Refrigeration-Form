<!DOCTYPE html>
<html>

<head>
    <title>JM Refrigeration Form</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">





</head>
<!-- Logo -->
<div class="logo">
    <a href="https://rafiqfarmfoods.com/" target="_blank">
        <img id="logoImg" src="/images/rff.png">
    </a>
</div>

<!-- Form -->

<body>
    <h1>JM Refrigeration Form</h1>
    <div id="line"></div>
    <form id="JMRefrigerationForm">
        <div class="sections">
            <h2>Ammonia compressor -40</h1>
                <label for="RSD">Total running hours /day:</label>
                <div class="RSD">

                    <input type="text" id="availability-duration" name="AmmoniaCompressor-40 Total running hours/day"
                        placeholder="HH:MM" class="time-input" required>

                    <!-- <label for="RSD">Remarks:</label> -->
                    <input type="text" id="remarks" name="AmmoniaCompressor-40 Remarks" required placeholder="Remarks">
                </div>
                <div class="sections">
                    <h2>Ammonia compressor -30</h1>
                        <label for="RSD">Total running hours /day:</label>
                        <div class="RSD">

                            <input type="text" id="availability-duration"
                                name="AmmoniaCompressor-30 Total running hours/day" placeholder="HH:MM"
                                 class="time-input" required>
                            <!-- <label for="RSD">Remarks:</label> -->
                            <input type="text" id="remarks30" name="AmmoniaCompressor-30 Remarks" required
                                placeholder="Remarks">
                        </div>
                        <div class="sections">
                            <h2>Ammonia compressor -10</h1>
                                <label for="RSD">Total running hours /day:</label>
                                <div class="RSD">

                                    <input type="text" id="availability-duration"
                                        name="AmmoniaCompressor-10 Total running hours/day" placeholder="HH:MM"
                                         class="time-input" required>
                                    <!-- <label for="RSD">Remarks:</label> -->
                                    <input type="text" id="remarks10" name="AmmoniaCompressor-10 Remarks" required
                                        placeholder="Remarks">
                                </div>
                                <div class="sections">
                                    <h2>Ammonia Condenser No1</h1>
                                        <label for="RSD">Total running hours /day:</label>
                                        <div class="RSD">

                                            <input type="text" id="availability-duration"
                                                name="AmmoniaCondenserNo1 Total running hours/day" placeholder="HH:MM"
                                                 class="time-input" required>
                                            <!-- <label for="RSD">Remarks:</label> -->
                                            <input type="text" id="remarksAC1" name="AmmoniaCondenserNo1 Remarks"
                                                required placeholder="Remarks">
                                        </div>
                                        <div class="sections">
                                            <h2>Ammonia Condenser No2</h1>
                                                <label for="RSD">Total running hours /day:</label>
                                                <div class="RSD">

                                                    <input type="text" id="availability-duration"
                                                        name="AmmoniaCondenserNo2 Total running hours/day"
                                                        placeholder="HH:MM" 
                                                        class="time-input" required>
                                                    <!-- <label for="RSD">Remarks:</label> -->
                                                    <input type="text" id="remarksAC2"
                                                        name="AmmoniaCondenserNo2 Remarks" required
                                                        placeholder="Remarks">
                                                </div>
                                                <div class="sections">
                                                    <h2>Day Storage Evaporator Hall Fan</h1>
                                                        <label for="RSD">Total running hours /day:</label>
                                                        <div class="RSD">

                                                            <input type="text" id="availability-duration"
                                                                name="DayStorageEvaporatorHallFan Total running hours/day"
                                                                placeholder="HH:MM"
                                                                class="time-input" required>
                                                            <!-- <label for="RSD">Remarks:</label> -->
                                                            <input type="text" id="remarksDSEHF"
                                                                name="DayStorageEvaporatorHallFan Remarks" required
                                                                placeholder="Remarks">
                                                        </div>
                                                        <div class="sections">
                                                            <h2>Cold Storage Evaporator No.1 Fan</h1>
                                                                <label for="RSD">Total running hours /day:</label>
                                                                <div class="RSD">

                                                                    <input type="text" id="availability-duration"
                                                                        name="ColdStorageEvaporatorNo1Fan Total running hours/day"
                                                                        placeholder="HH:MM"
                                                                        class="time-input" required>
                                                                    <!-- <label for="RSD">Remarks:</label> -->
                                                                    <input type="text" id="remarksfan1"
                                                                        name="ColdStorageEvaporatorNo1Fan Remarks"
                                                                        required placeholder="Remarks">
                                                                </div>
                                                                <div class="sections">
                                                                    <h2>Cold Storage Evaporator No.2 Fan</h1>
                                                                        <label for="RSD">Total running hours
                                                                            /day:</label>
                                                                        <div class="RSD">

                                                                            <input type="text"
                                                                                id="availability-duration"
                                                                                name="ColdStorageEvaporatorNo2Fan Total running hours/day"
                                                                                placeholder="HH:MM"
                                                                                class="time-input" required>
                                                                            <!-- <label for="RSD">Remarks:</label> -->
                                                                            <input type="text" id="remarksfan2"
                                                                                name="ColdStorageEvaporatorNo2Fan Remarks"
                                                                                required placeholder="Remarks">
                                                                        </div>
                                                                        <div class="sections">
                                                                            <h2>Cold Storage Evaporator No.3 Fan</h1>
                                                                                <label for="RSD">Total running hours
                                                                                    /day:</label>
                                                                                <div class="RSD">

                                                                                    <input type="text"
                                                                                        id="availability-duration"
                                                                                        name="ColdStorageEvaporatorNo3Fan Total running hours/day"
                                                                                        placeholder="HH:MM"
                                                                                        class="time-input" required>
                                                                                    <!-- <label for="RSD">Remarks:</label> -->
                                                                                    <input type="text" id="remarksfan3"
                                                                                        name="ColdStorageEvaporatorNo3Fan Remarks"
                                                                                        required placeholder="Remarks">
                                                                                </div>
                                                                                <div class="sections">
                                                                                    <h2>Cold storage Corridor Evaporator
                                                                                        Fan</h1>
                                                                                        <label for="RSD">Total running
                                                                                            hours /day:</label>
                                                                                        <div class="RSD">

                                                                                            <input type="text"
                                                                                                id="availability-duration"
                                                                                                name="ColdstorageCorridorEvaporatorFan Total running hours/day"
                                                                                                placeholder="HH:MM"
                                                                                                class="time-input"
                                                                                                required>
                                                                                            <!-- <label for="RSD">Remarks:</label> -->
                                                                                            <input type="text"
                                                                                                id="remarksCSCE"
                                                                                                name="ColdstorageCorridorEvaporatorFan Remarks"
                                                                                                required
                                                                                                placeholder="Remarks">
                                                                                        </div>
                                                                                        <div class="sections">
                                                                                            <h2>Air Compressor</h1>
                                                                                                <label for="RSD">Total
                                                                                                    running
                                                                                                    hours /day:</label>
                                                                                                <div class="RSD">

                                                                                                    <input type="text"
                                                                                                        id="availability-duration"
                                                                                                        name="AirCompressor Total running hours/day"
                                                                                                        placeholder="HH:MM"
                                                                                                        class="time-input"
                                                                                                        required>
                                                                                                    <!-- <label for="RSD">Remarks:</label> -->
                                                                                                    <input type="text"
                                                                                                        id="remarks"
                                                                                                        name="AirCompressor Remarks"
                                                                                                        required
                                                                                                        placeholder="Remarks">
                                                                                                </div>
                                                                                                <div class="sections">
                                                                                                    <h2>Production Hall
                                                                                                        Evaporator Fan
                                                                                                        </h1>
                                                                                                        <label
                                                                                                            for="RSD">Total
                                                                                                            running
                                                                                                            hours
                                                                                                            /day:</label>
                                                                                                        <div
                                                                                                            class="RSD">

                                                                                                            <input
                                                                                                                type="text"
                                                                                                                id="availability-duration"
                                                                                                                name="ProductionHallEvaporatorFan Total running hours/day"
                                                                                                                placeholder="HH:MM"
                                                                                                                class="time-input"
                                                                                                                required>
                                                                                                            <!-- <label for="RSD">Remarks:</label> -->
                                                                                                            <input
                                                                                                                type="text"
                                                                                                                id="remarks"
                                                                                                                name="ProductionHallEvaporatorFan Remarks"
                                                                                                                required
                                                                                                                placeholder="Remarks">
                                                                                                        </div>



                                                                                                        <div
                                                                                                            class="sections">
                                                                                                            <h2>Loading
                                                                                                                Area
                                                                                                                Evaporator
                                                                                                                Fan
                                                                                                                </h1>
                                                                                                                <label
                                                                                                                    for="RSD">Total
                                                                                                                    running
                                                                                                                    hours
                                                                                                                    /day:</label>
                                                                                                                <div
                                                                                                                    class="RSD">

                                                                                                                    <input
                                                                                                                        type="text"
                                                                                                                        id="availability-duration"
                                                                                                                        name="loadingAreaEvaporatorFan Total running hours/day"
                                                                                                                        placeholder="HH:MM"
                                                                                                                        class="time-input"
                                                                                                                        required>
                                                                                                                    <!-- <label for="RSD">Remarks:</label> -->
                                                                                                                    <input
                                                                                                                        type="text"
                                                                                                                        id="remarks"
                                                                                                                        name="loadingAreaEvaporatorFan Remarks"
                                                                                                                        required
                                                                                                                        placeholder="Remarks">
                                                                                                                </div>



                                                                                                                <input
                                                                                                                    type="submit"
                                                                                                                    value="Submit">

    </form>

    <!-- spinner html -->
    <div class="spinner-container">
        <div class="spinner"></div>
    </div>
    <!-- end of spinner html -->

    <!-- Add the modal HTML code -->
    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <div class="modal-content">
            <p id="modal-message"></p>
            <button id="closeBtn">Close</button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p><a href="https://rafiqfarmfoods.com/" target="_blank">Copyright &copy; Rafiq Farm Foods | All Right
                Reserved. </a></p>
    </footer>
    <!-- end of Footer -->


    <!-- JavaScript -->
    <script>

        const scriptURL = 'https://script.google.com/macros/s/AKfycbz4dNwDvNk8ylKw8vvAAXfTm0zv7gy64BI-NvtyhFEYg7tfG9ZqkljDgZWNyFVQ3CO8UQ/exec';
        const form = document.getElementById("JMRefrigerationForm");

        // modal javascript
        // Get the modal element, the close button, and the close button inside the modal
        const modal = document.getElementById("myModal");
        const closeBtn = document.querySelector(".close");
        const modalCloseBtn = document.getElementById("closeBtn");


        form.addEventListener('submit', e => {
            e.preventDefault();
            modal.style.display = "block";
            fetch(scriptURL, { method: 'POST', body: new FormData(form) })
                .then(response => {
                    hideSpinner(); // Hide the spinner
                    document.getElementById("modal-message").textContent = 'Success!';
                })
                .catch(error => {
                    hideSpinner(); // Hide the spinner
                    document.getElementById("modal-message").textContent = 'Error! ' + error.message;
                });
        });
        // Close the modal when the close button is clicked
        closeBtn.addEventListener("click", () => {
            modal.style.display = "none";
        });
        // Close the modal when the close button inside the modal is clicked
        modalCloseBtn.addEventListener("click", () => {
            modal.style.display = "none";
        });

    </script>


    <!-- reseting form after submitting -->
    <script>
        document.getElementById('JMRefrigerationForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Prevent the default form submission

            this.reset();
        });

    </script>
    <!-- end of for reseting after submitting -->

    <script>
        // Function to show the spinner
        function showSpinner() {
            const spinnerContainer = document.querySelector(".spinner-container");
            spinnerContainer.style.display = "flex";
            modal.style.display = "none";
        }

        // Function to hide the spinner
        function hideSpinner() {
            const spinnerContainer = document.querySelector(".spinner-container");
            spinnerContainer.style.display = "none";
            modal.style.display = "block";
        }

        // Function to handle form submission
        function handleSubmit(event) {
            event.preventDefault();
            showSpinner(); // Show the spinner


        }

        // Add event listener to form submit

        form.addEventListener("submit", handleSubmit);
    </script>
    <!-- end of spinner -->



     <!-- check time validations -->
     <script>
        // Function to validate the duration input
        function validateDurationInput(inputElement) {
               inputElement.addEventListener('change', function () {
                   inputElement.setCustomValidity('');
                   var value = inputElement.value;
                   var timeParts = value.split(':');
   
                   // Check if the input is in the format HH:MM or HH
                   if (timeParts.length === 2) {
                       var hours = parseInt(timeParts[0]);
                       var minutes = parseInt(timeParts[1]);
   
                       if (isNaN(hours) || isNaN(minutes) || hours > 24 || (hours === 24 && minutes !== 0) || minutes >= 60) {
                           inputElement.setCustomValidity('Please enter a valid duration in HH:MM format with hours under 24 and minutes under 60.');
                       }
                   } else if (timeParts.length === 1) {
                       var hoursOnly = parseInt(timeParts[0]);
   
                       if (isNaN(hoursOnly) || hoursOnly > 24) {
                           inputElement.setCustomValidity('Please enter a valid duration in HH:MM format with hours under 24.');
                       }
                   } else {
                       inputElement.setCustomValidity('Please enter a valid duration in HH:MM format or hours only.');
                   }
               });
           }
   
           // Get the input elements and validate them
           var durationInputs = document.querySelectorAll('.time-input');
           durationInputs.forEach(function (input) {
               validateDurationInput(input);
           });
   
   
   
   
   
   
           // auto add colon : between HH and MM
           document.addEventListener('DOMContentLoaded', function () {
               const timeInputs = document.querySelectorAll('.time-input');
   
               timeInputs.forEach(function (inputElement) {
                   inputElement.addEventListener('input', function (event) {
                       const inputValue = event.target.value.trim();
   
                       // Check if the input value has reached 2 characters (HH)
                       if (inputValue.length === 2 && !inputValue.includes(':')) {
                           // Add the colon ':' after the HH part
                           event.target.value = inputValue + ':';
                       }
                   });
               });
           });
       </script>
       <!-- End of check time validations -->

</html>